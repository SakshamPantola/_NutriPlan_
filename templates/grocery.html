{% extends "base.html" %}
{% block title %}Grocery List - NutriPlan{% endblock %}

{% block content %}
<div class="container" style="max-width: 500px; padding: 24px 20px;">
    <h1 style="font-size: 20px; font-weight: 700; text-align: center; margin-bottom: 20px;">Grocery List</h1>

    <div class="whatsapp-container">
        <div class="whatsapp-header">
            <div class="whatsapp-avatar">ðŸ›’</div>
            <div>
                <p style="font-weight: 600; font-size: 14px;">NutriPlan</p>
                <p style="font-size: 11px; opacity: 0.7;">Your meal assistant</p>
            </div>
        </div>

        <div class="whatsapp-chat">
            <div class="chat-message received">
                <p>Hi! Here's your grocery list for the week ðŸ›’</p>
                <p class="chat-time">10:30 AM</p>
            </div>

            <div class="chat-message sent">
                <p>Perfect! I was about to go shopping</p>
                <p class="chat-time">10:31 AM âœ“âœ“</p>
            </div>

            <div class="chat-message received">
                {% for category in grocery_list %}
                <div style="margin-bottom: 10px;">
                    <p style="font-weight: 600; font-size: 13px; margin-bottom: 4px;">{{ category.name }}</p>
                    <ul style="list-style: none; padding: 0;">
                        {% for item in category.product_list %}
                        <li style="font-size: 12px; display: flex; gap: 6px; padding: 2px 0;">
                            <span style="color: #2d5a3d;">â€¢</span>{{ item }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endfor %}
                <p class="chat-time">10:32 AM</p>
            </div>
        </div>

        <div style="background: #f0f0f0; padding: 10px 12px; display: flex; align-items: center; gap: 10px;">
            <div style="flex: 1; background: #fff; border-radius: 20px; padding: 8px 14px; font-size: 13px; color: #666;">Type a message...</div>
            <button style="width: 36px; height: 36px; background: #2d5a3d; border: none; border-radius: 50%; color: #fff; cursor: pointer;">âž¤</button>
        </div>
    </div>

    <div style="display: flex; gap: 12px; margin-top: 20px;">
        <button class="btn btn-secondary" style="flex: 1;" onclick="copyList()">ðŸ“‹ Copy</button>
        <a href="https://wa.me/?text={{ grocery_text|urlencode }}" target="_blank" class="btn btn-primary" style="flex: 1;">ðŸ“¤ Share</a>
    </div>

    <div class="tip-card" style="margin-top: 16px;">
        <p class="tip-title">ðŸ’¡ Pro Tip</p>
        <p class="tip-text">Share this list with family so everyone knows what to get!</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function copyList() {
    const text = `{{ grocery_text|safe }}`;
    navigator.clipboard.writeText(text).then(() => {
        alert('Copied to clipboard!');
    });
}
</script>
{% endblock %}
